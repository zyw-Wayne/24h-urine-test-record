# 24小时尿蛋白检测记录系统

一个用于记录和管理24小时尿蛋白检测数据的H5应用。

## 功能特性

### 核心功能

- **检测周期管理**：开始和结束24小时检测周期，实时显示剩余时间
- **排尿记录**：记录每次排尿的时间和尿量，自动计算总尿量
- **检测指标记录**：记录尿蛋白、肌酐、尿比重、pH值等指标
- **自动计算**：自动计算24小时总尿蛋白量
- **异常值提示**：超出正常范围的指标会高亮显示

### 历史记录

- **历史查询**：查看所有历史检测记录
- **记录详情**：查看每个检测周期的完整信息
- **数据可视化**：通过图表展示尿量、尿蛋白、肌酐等指标的趋势
- **时间筛选**：支持按最近7天、30天或全部筛选

### 数据管理

- **Excel导出**：导出所有历史记录为Excel文件
- **数据备份**：备份所有数据为JSON文件
- **数据恢复**：从备份文件恢复数据
- **数据清空**：清空所有数据（需二次确认）

### 用户设置

- **个人信息**：设置昵称、性别、年龄
- **单位设置**：自定义尿量和蛋白单位
- **主题设置**：支持浅色/深色主题
- **使用说明**：内置检测流程和注意事项说明

## 技术栈

- **前端框架**：React 18 + TypeScript
- **UI框架**：Ant Design Mobile
- **数据存储**：IndexedDB (使用Dexie.js)
- **数据可视化**：Chart.js
- **构建工具**：Vite
- **路由管理**：React Router

## 安装和运行

### 环境要求

- Node.js >= 16.0.0
- npm >= 7.0.0

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动

### 构建生产版本

```bash
npm run build
```

构建产物在 `dist` 目录

### 预览生产版本

```bash
npm run preview
```

## 使用说明

### 开始检测

1. 打开应用，进入"记录"页面
2. 点击"开始检测周期"按钮
3. 系统会自动记录开始时间，并开始24小时倒计时

### 记录排尿

1. 每次排尿后，点击"添加记录"按钮
2. 选择排尿时间（默认当前时间，可手动调整）
3. 输入尿量（毫升）
4. 点击"保存"

### 录入检测结果

1. 在检测周期进行中或结束后，点击"检测结果"卡片右上角的"录入"或"编辑"按钮
2. 输入各项检测指标：
   - 尿蛋白（mg/L）
   - 肌酐（μmol/L）
   - 尿比重
   - pH值
3. 系统会自动计算24小时总尿蛋白量
4. 点击"保存"

### 查看历史记录

1. 进入"历史"页面
2. 可以按时间范围筛选（最近7天/30天/全部）
3. 点击记录查看详情
4. 点击"查看图表"查看数据可视化

### 数据导出和备份

1. 进入"我的"页面
2. 点击"导出Excel"导出所有记录为Excel文件
3. 点击"备份数据"下载JSON格式的备份文件
4. 点击"恢复数据"从备份文件恢复数据

## 正常值参考

- **24小时尿蛋白**：< 150 mg（男女通用）
- **肌酐**：
  - 男性：53-106 μmol/L
  - 女性：44-97 μmol/L
- **尿比重**：1.003-1.030（男女通用）
- **pH值**：4.6-8.0（男女通用）

> 注意：系统会根据您在"我的"页面设置的性别，自动使用对应的正常值范围来判断检测结果是否异常。

## 注意事项

1. **首次排尿不收集**：开始检测后，首次排尿不收集，之后的所有尿液都需收集
2. **完整收集**：确保24小时内所有尿液都收集完整，避免遗漏
3. **冷藏保存**：尿液需冷藏保存，避免细菌污染
4. **避免干扰**：检测期间避免剧烈运动、高蛋白饮食和服用可能影响结果的药物
5. **数据备份**：建议定期备份数据，防止数据丢失

## 浏览器兼容性

- iOS Safari 12+
- Android Chrome 80+
- 微信内置浏览器
- 其他现代浏览器

## 项目结构

```
24h-urine-test-record/
├── public/                 # 静态资源
├── src/
│   ├── assets/            # 资源文件
│   ├── components/        # 公共组件
│   │   ├── Layout/        # 布局组件
│   │   ├── Charts/        # 图表组件
│   │   └── Common/        # 通用组件
│   ├── pages/             # 页面组件
│   │   ├── Record/        # 记录页
│   │   ├── History/       # 历史页
│   │   └── Profile/        # 我的页
│   ├── services/          # 服务层
│   │   ├── db.ts          # IndexedDB操作
│   │   ├── export.ts      # 数据导出
│   │   └── backup.ts      # 备份恢复
│   ├── hooks/             # 自定义Hooks
│   ├── utils/             # 工具函数
│   ├── types/             # TypeScript类型定义
│   ├── constants/         # 常量定义
│   ├── App.tsx            # 根组件
│   └── main.tsx           # 入口文件
├── package.json
├── tsconfig.json
├── vite.config.ts
└── README.md
```

## 开发说明

### 代码规范

- 使用ESLint进行代码检查
- 使用Prettier进行代码格式化
- 所有AI生成的代码都标记了 `// AIGC START` 和 `// AIGC END`

### 数据模型

主要数据模型包括：
- `TestCycle`：检测周期
- `UrinationRecord`：排尿记录
- `TestResult`：检测结果
- `UserConfig`：用户配置

### 数据存储

- 使用IndexedDB存储所有数据
- 使用Dexie.js简化数据库操作
- 所有数据存储在本地，不上传服务器

## 许可证

MIT License

## 版本历史

### v1.0.0

- 初始版本
- 实现核心功能：检测周期管理、排尿记录、检测指标录入
- 实现历史记录查询和数据可视化
- 实现数据导出、备份和恢复功能
- 实现用户设置和配置
